!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){},function(e,t){function r(e){var t=document.getElementById(e);this.sldrRoot=t||document.querySelector(".sim-slider"),this.sldrList=this.sldrRoot.querySelector(".sim-slider-list"),this.sldrElements=this.sldrList.querySelectorAll(".sim-slider-element"),this.sldrElemFirst=this.sldrList.querySelector(".sim-slider-element"),this.leftArrow=this.sldrRoot.querySelector("div.sim-slider-arrow-left"),this.rightArrow=this.sldrRoot.querySelector("div.sim-slider-arrow-right"),this.indicatorDots=this.sldrRoot.querySelector("div.sim-slider-dots"),this.options=r.defaults,r.initialize(this)}r.defaults={loop:!0,auto:!0,interval:4e3,arrows:!0,dots:!0},r.prototype.elemPrev=function(e){e=e||1;var t=this.currentElement;this.currentElement-=e,this.currentElement.style.width="100%",this.currentElement.style.height="100%",this.currentElement<0&&(this.currentElement=this.elemCount-1),this.options.loop||(0==this.currentElement&&(this.leftArrow.style.display="none"),this.rightArrow.style.display="block"),this.sldrElements[this.currentElement].style.opacity="1",this.sldrElements[t].style.opacity="0",this.options.dots&&(this.dotOn(t),this.dotOff(this.currentElement))},r.prototype.elemNext=function(e){e=e||1;var t=this.currentElement;this.currentElement+=e,this.currentElement>=this.elemCount&&(this.currentElement=0),this.options.loop||(this.currentElement==this.elemCount-1&&(this.rightArrow.style.display="none"),this.leftArrow.style.display="block"),this.sldrElements[this.currentElement].style.opacity="1",this.sldrElements[t].style.opacity="0",this.options.dots&&(this.dotOn(t),this.dotOff(this.currentElement))},r.prototype.dotOn=function(e){this.indicatorDotsAll[e].style.cssText="background-color:#BBB; cursor:pointer;"},r.prototype.dotOff=function(e){this.indicatorDotsAll[e].style.cssText="background-color:#556; cursor:default;"},r.initialize=function(e){e.elemCount=e.sldrElements.length,e.currentElement=0;var t=r();function r(){return(new Date).getTime()}function o(){e.autoScroll=setInterval((function(){var o=r();o-t+10>e.options.interval&&(t=o,e.elemNext())}),e.options.interval)}e.elemCount<=1&&(e.options.auto=!1,e.options.arrows=!1,e.options.dots=!1,e.leftArrow.style.display="none",e.rightArrow.style.display="none"),e.elemCount>=1&&(e.sldrElemFirst.style.opacity="1"),e.options.loop?e.options.auto&&(o(),e.sldrList.addEventListener("mouseenter",(function(){clearInterval(e.autoScroll)}),!1),e.sldrList.addEventListener("mouseleave",o,!1)):(e.leftArrow.style.display="none",e.options.auto=!1),e.options.arrows?(e.leftArrow.addEventListener("click",(function(){var o=r();o-t>1e3&&(t=o,e.elemPrev())}),!1),e.rightArrow.addEventListener("click",(function(){var o=r();o-t>1e3&&(t=o,e.elemNext())}),!1)):(e.leftArrow.style.display="none",e.rightArrow.style.display="none"),e.options.dots&&function(){for(var o,n="",i=0;i<e.elemCount;i++)n+='<span class="sim-dot"></span>';e.indicatorDots.innerHTML=n,e.indicatorDotsAll=e.sldrRoot.querySelectorAll("span.sim-dot");for(var s=function(n){e.indicatorDotsAll[n].addEventListener("click",(function(){o=Math.abs(n-e.currentElement),n<e.currentElement?(t=r(),e.elemPrev(o)):n>e.currentElement&&(t=r(),e.elemNext(o))}),!1)},l=0;l<e.elemCount;l++)s(l);e.dotOff(0);for(var a=1;a<e.elemCount;a++)e.dotOn(a)}()},new r},function(e,t,r){"use strict";r.r(t);r(0),r(1);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("Ошибка: ".concat(e.status)))}},{key:"getAllQuotes",value:function(){var e=this;return fetch("https://www.buymebuyme.xyz",{headers:this._headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getQuotesByKeyword",value:function(e){var t=this;return fetch("https://www.buymebuyme.xyz?q=".concat(e),{headers:this._headers}).then((function(e){return t._getResponseData(e)}))}},{key:"submitForm",value:function(e){var t=this;return fetch("".concat(this._url),{method:"POST",headers:this._headers,body:JSON.stringify({city:e.city,text:e.text})}).then((function(e){return t._getResponseData(e)}))}}])&&o(t.prototype,r),n&&o(t,n),e}();function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"createCard",value:function(e){var t=document.querySelector(".quote__template").content.querySelector(".quote__card").cloneNode(!0),r=t.querySelector(".quote__text"),o=t.querySelector(".quote__author"),n=t.querySelector(".quote__choice-btn"),i=t.querySelector(".quote__radio-label");return n.id=e.pk,i.setAttribute("for",e.pk),r.textContent=e.fields.text,o.textContent=e.fields.author,t}}])&&i(t.prototype,r),o&&i(t,o),e}();function l(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=document.querySelector(t),this._cityInput=this._form.querySelector(".city-select")}var t,r,o;return t=e,(r=[{key:"_getRadioValue",value:function(){this._cardChoice=this._form.querySelectorAll(".quote__choice-btn");for(var e=0;e<this._cardChoice.length;e++)if(this._cardChoice[e].checked)return this._poemText=this._cardChoice[e].closest(".quote__card").querySelector(".quote__text"),this._cardChoice[e].value=this._poemText.textContent,this._cardChoice[e].value}},{key:"getFormValues",value:function(){return this._formValues={},this._formValues.city=this._cityInput.value,this._formValues.text=this._getRadioValue(),console.log(this._formValues),this._formValues}}])&&l(t.prototype,r),o&&l(t,o),e}(),u=new n,c=document.querySelector(".leader-like__heart"),d=document.querySelector(".leader-like__thumb");document.querySelector(".leader-like").addEventListener("click",(function(e){e.target===d?d.classList.toggle("leader-like__thumb_active"):e.target===c&&(c.classList.toggle("leader-like__heart_active"),m())}));var h=document.querySelector(".about__counter"),f=11507;function m(){f<35e3&&(h.textContent="".concat(f),f++)}setInterval(m,1e3),u.getAllQuotes().then((function(e){console.log(e);var t=e,r=document.querySelector(".idea__text");function o(){var e=r.value.split(/[-\.,\s!]+/).filter((function(e){return e.length>4}));console.log(e);var o=[];e.map((function(e){var r=t.filter((function(t){return t.fields.text.includes(e)})),n=r[Math.floor(Math.random()*r.length)];console.log(n),n&&o.push(n)})),console.log(o);var n=document.querySelector(".quote"),i=new s;o.forEach((function(e){!function(e){n.prepend(i.createCard(e))}(e)}))}var n=document.querySelector(".idea__container"),i=document.querySelector(".quote"),l=document.querySelector(".idea__success-message"),u=new a(".idea__container");ideaСensor.addEventListener("click",(function(){ideaСensor.classList.add("idea__button_hide"),ideaSend.classList.remove("idea__button_hide"),o(),ideaText.value="Выберите стих на карточке",ideaText.disabled=!0,i.classList.remove("quote_hide"),l.classList.remove("idea__success-message_visible")})),n.addEventListener("submit",(function(e){e.preventDefault(),u.getFormValues(),i.classList.add("quote_hide"),l.classList.add("idea__success-message_visible"),ideaСensor.classList.remove("idea__button_hide"),ideaSend.classList.add("idea__button_hide"),ideaText.disabled=!1,ideaText.value=""}))}))}]);